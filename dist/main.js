"use strict";class TimeUtils{static formatTime=e=>{var t=Math.floor(e/60),e=e%60;return String(t).padStart(2,"0")+":"+String(e).padStart(2,"0")}}class Chronometer{constructor(){this.seconds=0,this.intervalId=null,this.chronometer=document.querySelector("#chronometer")}updateChronometer=()=>{this.seconds++;var e=TimeUtils.formatTime(this.seconds);this.chronometer.innerText=""+e};startChronometer=()=>{this.intervalId=setInterval(this.updateChronometer,1e3)};stopChronometer=()=>{clearInterval(this.intervalId)}}class Image{static getImage(e){let t="./images/";switch(e){case 1:t+="elephant.png";break;case 2:t+="giraffe.png";break;case 3:t+="/hippo.png";break;case 4:t+="monkey.png";break;case 5:t+="panda.png";break;case 6:t+="parrot.png";break;case 7:t+="penguin.png";break;case 8:t+="pig.png";break;case 9:t+="rabbit.png";break;case 10:t+="snake.png";break;default:console.log("cellule non trouvée")}return t}}class GameBoard{constructor(){this.gameBoard=[[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0]],this.resultBoard=this.randomArrayGenerator()}randomArrayGenerator=()=>{var t=[],r=[0,0,0,0,0,0,0,0,0,0];for(let e=0;e<this.gameBoard.length;e++){var a=[];for(let e=0;e<this.gameBoard[0].length;e++){let e=!1;for(;!e;){var o=Math.floor(10*Math.random());r[o]<2&&(a.push(o+1),r[o]++,e=!0)}}t.push(a)}return t}}class Game{constructor(e){this.gameBoard=new GameBoard,this.chronometer=e,this.content=document.querySelector("#content"),this.modal=document.querySelector("#modal"),this.record=document.querySelector(".record"),this.message=document.querySelector(".message"),this.odlSelection=[],this.nbClick=0,this.canPlay=!0,this.score=0}displayGameBoard=()=>{let a="";this.gameBoard.gameBoard.forEach((e,r)=>{a+="<div>",e.forEach((e,t)=>{a+=0===e?`<button class='item' id='button-${r}-${t}'><span class='text-item'>Dévoiler</span></button>`:`<img src='${Image.getImage(e)}' alt='image' class='p_size-card'/>`}),a+="</div>"}),this.content.innerHTML=a,this.gameBoard.gameBoard.forEach((e,r)=>{e.forEach((e,t)=>{0===e&&document.getElementById(`button-${r}-`+t).addEventListener("click",()=>{this.checkCell(r+"-"+t)})})})};checkCell=e=>{if(this.canPlay){this.nbClick++;const t=e.substr(0,1),r=e.substr(2,1);this.gameBoard.gameBoard[t][r]=this.gameBoard.resultBoard[t][r],this.displayGameBoard(),1<this.nbClick?(this.canPlay=!1,setTimeout(()=>{this.gameBoard.gameBoard[t][r]!==this.gameBoard.resultBoard[this.odlSelection[0]][this.odlSelection[1]]&&(this.gameBoard.gameBoard[t][r]=0,this.gameBoard.gameBoard[this.odlSelection[0]][this.odlSelection[1]]=0),this.displayGameBoard(),this.canPlay=!0,this.nbClick=0,this.odlSelection=[t,r],this.gameBoard.gameBoard.flat().includes(0)||(this.chronometer.stopChronometer(),this.score=this.chronometer.seconds,this.viewBestScore(this.score),this.viewModal())},1e3)):this.odlSelection=[t,r]}};viewModal=()=>{this.content.classList.add("hide"),this.modal.classList.remove("hide")};viewBestScore=e=>{let t=localStorage.getItem("bestScoreMemoAnimauxDP");e<(t=t?parseInt(t):3600)?(3600!==t&&(this.message.textContent="Bravo ! Vous avez battu votre reccord !"),t=e,localStorage.setItem("bestScoreMemoAnimauxDP",t)):this.message.textContent="Rejouez pour tenter de battre votre record.";e=TimeUtils.formatTime(t);this.record.textContent="Votre meilleur temps est "+e}}const chronometer=new Chronometer,game=new Game(chronometer),restart=document.querySelector(".restart");chronometer.startChronometer(),game.displayGameBoard(),restart.addEventListener("click",()=>{location.reload()});